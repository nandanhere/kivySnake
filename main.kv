#:import webbrowser webbrowser

# this is a comment
ScreenManager:
    Main:
    OptionsScreen:
    GameScreen:
        
<Main>:
    name:'main'
    id:mainscreen
    MDBoxLayout:
        orientation: "vertical"
        md_bg_color: 0,0,0,1
        MDLabel:
            id:label
            text: "Kivy Snake"
            font_style:"H2"
            halign: "center"
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
        MDIconButton:
            icon:'play-circle'
            user_font_size: "128sp"
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .5}
            theme_text_color: 'Custom'
            text_color: 1,1,1,1
            on_release:
                root.manager.current = 'game'
                root.manager.transition.direction = "up"
        MDIconButton:
            icon:'cog'
            user_font_size: "64sp"
            halign: "center"
            pos_hint: {"center_x": .5, "center_y": .5}
            theme_text_color: 'Custom'
            text_color: 1,1,1,1
            on_release:
                root.manager.current = 'options'
                root.manager.transition.direction = "right"


<GameScreen>:
    name:'game'
    config:app.config
    md_bg_color: 0,0,0,1
    MDFlatButton:
        text:"Game"
        on_release:
            root.manager.transition.direction = "up"
            root.manager.current = 'main'
<OptionsScreen>:
    name:'options'
    config:None
    MDFloatLayout:
        md_bg_color:0,0,0,1
        MDFlatButton:
            text:"Settings"
            font_style:"H2"
            halign:"center"
            valign: 'middle'
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            on_release:
                root.manager.current = 'main'
        MDFlatButton:
            selected:self.parent.parent.gameConfig.SOUND
            text:"SOUND:" + self.selected
            font_style:"H2"
            halign:"center"
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
            pos_hint: {"center_x": 0.5, "center_y": 0.25}
            on_release:
                self.selected = 'OFF' if self.selected == 'ON' else 'ON'
                self.parent.parent.gameConfig.SOUND = self.selected
                self.parent.parent.gameConfig.STORE['SETTINGS'] = {'SOUND' : self.selected,}

<ScoreLabel>:
    score:0
    state: "PLAY"
    highScore:0
    chances:5
    Button:
        markup:True
        text:"Score:{}\n [b]Chances[/b]:{}\n High Score : {}".format(self.parent.score,self.parent.chances,self.parent.highScore) 
        halign: 'center'
        valign: 'middle'
        font_size: 20
        on_release:
            if self.parent.state == "DEAD" or self.parent.state == 'PLAY':\
            app.root.current = "main";\
            self.parent.parent.parent.parent.transition.direction = "down";
            self.parent.on_release()
    
        


